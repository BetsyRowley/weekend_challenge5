var movieApp=angular.module("movieApp",[]);movieApp.controller("SearchController",["$scope","BlockbusterService",function(a,b){console.log("SearchController called");var c=b;a.title="",a.getOMDB=c.getOMDB}]),movieApp.controller("ResultsController",["$scope","BlockbusterService",function(a,b){var c=b;a.omdbResults=c.omdbResults,a.postMyDb=c.postMyDb,a.addFavoriteMovie=c.addFavoriteMovie}]),movieApp.controller("FavoritesController",["$scope","BlockbusterService",function(a,b){var c=b;a.favoriteMovies=c.favoriteMovies,a.getFavorites=c.getFavorites,a.deleteFavorite=c.deleteFavorite}]),movieApp.factory("BlockbusterService",["$http",function(a){var b={},c={},d={},e=function(){a.get("/favorites").then(function(a){c.response=a,console.log("All favorites from mongo: ",c.response)})},f=function(b){console.log(b),a.post("/favorites",b).then(function(a){d.response=a,console.log("Saved to personal db: ",d.response)}),e()};return{omdbResults:b,favoriteMovies:c,postFavoriteMovie:d,postMyDb:f,addFavoriteMovie:function(a){var b=angular.copy(a);console.log("copy from clicking favotite: ",b),f(b)},getFavorites:e,deleteFavorite:function(b){console.log(b._id),a.delete("/favorites/"+b._id).then(function(a){console.log(a)}),e()},getOMDB:function(c){var d=angular.copy(c);console.log("Searched OMDB for: ",d),a.get("http://www.omdbapi.com/?t="+d+"&y&plot=full&r=json").then(function(a){b.response=a,console.log("OMDB results response: ",b.response)})}}}]);